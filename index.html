<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>iPhone 14 Pro – Loading + Telegram + Ads</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            height:100vh;display:flex;align-items:center;justify-content:center;
            background:#1c1c1e;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",Helvetica,Arial,sans-serif;
            color: #fff;
        }
        .phone{
            position:relative;width:min(390px, 90vw);aspect-ratio:9/17.55;
            background:#000;border-radius:47px;
            box-shadow:0 0 0 2px #333, 0 0 0 4px #000, 0 25px 50px -10px rgba(0,0,0,.6);
            overflow:hidden;
        }
        .island{
            position:absolute;top:10px;left:50%;transform:translateX(-50%);
            width:126px;height:37px;background:#000;border-radius:20px;z-index:3;
        }
        .screen{
            position:absolute;inset:3px;background:#000;border-radius:44px;
            overflow:hidden;display:none;flex-direction:column;justify-content:flex-end;align-items:center;
            padding-bottom:20px;
        }
        .screen.active {
            display: flex;
        }
        .btn-row{display:flex; flex-wrap: wrap; justify-content: center; gap:12px;margin-bottom:12px; padding: 0 10px;}
        .btn {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            background: #1c1c1e;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            color: #fff;
            cursor: pointer;
            user-select: none;
            border: 1px solid #333;
            position: relative;
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                0px 2px 5px rgba(0,0,0,0.4),
                inset 0px 1px 1px rgba(255,255,255,0.1);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 1px;
            left: 5%;
            width: 90%;
            height: 60%;
            border-radius: 18px 18px 10px 10px;
            background: linear-gradient(rgba(255,255,255,0.08), rgba(255,255,255,0));
        }

        .btn:active {
            transform: scale(0.95);
            box-shadow: 
                0px 1px 2px rgba(0,0,0,0.4),
                inset 0px 2px 4px rgba(0,0,0,0.5),
                inset 0px 1px 1px rgba(255,255,255,0.1);
        }
        .page{position:absolute;inset:0;background:#000;display:none; overflow-y: auto; padding-top: 50px;}
        .page.active{display:block}
        .back{position:absolute;top:20px;left:20px;background:#333;border:none;color:#fff;padding:8px 16px;border-radius:8px;cursor:pointer;font-size:14px; z-index: 20;}

        /* دائرة المستخدم */
        .user-circle{
            position:absolute;top:20px;left:20px;width:56px;height:56px;border-radius:50%;
            border:3px solid #c62c2c;background:transparent;display:flex;align-items:center;justify-content:center;z-index:10;
        }
        .user-img{width:100%;height:100%;border-radius:50%;object-fit:cover;display:none}
        .username{position:absolute;top:85px;left:20px;color:#fff;font-size:14px;font-weight:600;z-index:10}

        /* رصيد أنيق - يظهر فقط في الشاشة الرئيسية */
        .top-balance{
            position:absolute;
            top:9%;
            right:20px;
            display:flex;
            flex-direction:column;
            gap:8px;
            z-index:10;
            pointer-events:none;
        }
        .balance-row{
            display:flex;
            align-items:center;
            gap:8px;
        }
        .balance-label{
            color:#fff;
            font-size:13px;
            font-weight:600;
            text-shadow:0 0 2px #000;
        }

        /* LED Style */
        .led{
            background:#000;
            color:#0f0;
            font-family:'Courier New', monospace;
            font-weight:bold;
            padding:2px 6px;
            border-radius:4px;
            border:1px solid #0f0;
            font-size:11px;
            letter-spacing:1px;
        }

        /* رسائل التحويل */
        .form-message{margin-top:15px;font-size:14px;font-weight:600;opacity:0;transition:opacity .3s}
        .form-message.error{color:#f44336}
        .form-message.success{color:#4CAF50}

        /* شاشة التحميل */
        #loaderOverlay{
            position:absolute;inset:0;background:#000;z-index:999;
            display:flex;align-items:center;justify-content:center;flex-direction:column;gap:15px;
        }
        .loader-circle{
            width:50px;height:50px;border:5px solid #222;border-top-color:#0f0;border-radius:50%;
            animation:spin 1s linear infinite;
        }
        @keyframes spin{to{transform:rotate(360deg)}}
        .loader-text{color:#0f0;font-size:13px;font-family:'Courier New',monospace;}

        /* إشعار انتهاء الإعلانات */
        #notifBar{
            position:absolute;top:60px;left:50%;transform:translateX(-50%);
            background:#000;border:1px solid #0f0;color:#0f0;padding:8px 14px;border-radius:8px;
            font-size:12px;font-family:'Courier New',monospace;display:none;z-index:20;
        }
        
        .form-container {
            display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:20px;color:#fff;
        }
        .form-input {
            width:100%;max-width:280px;padding:12px;border-radius:12px;border:1px solid #0f0;
            background:#000;color:#0f0;font-size:16px;text-align:center;margin-bottom:20px;font-family:'Courier New', monospace;
        }
        .form-button {
            background: linear-gradient(145deg, #c62c2c, #8a1b1b);
            border: none;
            color: #fff;
            padding: 15px 40px;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 6px 6px 12px #0a0a0a, -6px -6px 12px #2e2e2e;
            transition: all .15s;
            text-shadow: 0 1px 2px rgba(0,0,0,0.4);
        }
        .form-button:active {
            box-shadow: inset 5px 5px 10px #0a0a0a, inset -5px 5px 10px #2e2e2e;
            transform: scale(.96);
        }
        
        /* Task Page Styles */
        .task-list { padding: 15px; display: flex; flex-direction: column; gap: 15px; }
        .task-item {
            background: #1c1c1e;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid #333;
        }
        .task-info { display: flex; flex-direction: column; gap: 5px; }
        .task-title { font-size: 16px; font-weight: 600; color: #fff; }
        .task-reward { font-size: 14px; color: #4CAF50; font-family: 'Courier New', monospace; }
        .task-button {
            background: #c62c2c;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color .2s;
        }
        .task-button:hover { background-color: #8a1b1b; }
        .task-button.completed { background-color: #4a4a4a; color: #888; cursor: not-allowed; }

        /* Leaderboard Styles */
        .leaderboard-list { padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .leaderboard-item {
            background: #1c1c1e;
            border-radius: 12px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 1px solid #333;
        }
        .leaderboard-rank { font-size: 16px; font-weight: bold; color: #888; width: 25px; text-align: center; }
        .leaderboard-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; background-color: #333; }
        .leaderboard-name { font-size: 16px; font-weight: 600; color: #fff; flex-grow: 1; }
        .leaderboard-score { font-size: 14px; color: #4CAF50; font-family: 'Courier New', monospace; }

        /* Clicker Circle Style */
        #clickerCircle {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle at 50% 40%, #d44040, #8a1b1b);
            border-radius: 50%;
            cursor: pointer;
            user-select: none;
            transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
            box-shadow: 
                inset 0 5px 15px rgba(255, 255, 255, 0.3), 
                inset 0 -5px 15px rgba(0, 0, 0, 0.4),
                0 15px 25px rgba(0, 0, 0, 0.5);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        #clickerCircle.clicked {
            transform: translate(-50%, -50%) scale(0.95);
            box-shadow: 
                inset 0 3px 10px rgba(255, 255, 255, 0.3), 
                inset 0 -3px 10px rgba(0, 0, 0, 0.4),
                0 5px 15px rgba(0, 0, 0, 0.5);
        }


    </style>
</head>
<body>
    <div class="phone">
        <!-- شاشة التحميل -->
        <div id="loaderOverlay">
            <div class="loader-circle"></div>
            <div class="loader-text">Loading user data...</div>
        </div>

        <!-- إشعار انتهاء الإعلانات -->
        <div id="notifBar">✅ انتهيت من الإعلانات لليوم، عد غدًا!</div>

        <!-- دائرة المستخدم -->
        <div class="user-circle" id="userCircle"><img class="user-img" id="userImg"></div>
        <!-- اسم المستخدم -->
        <div class="username" id="username"></div>
        <div class="island"></div>

        <!-- الرصيد مع كلمات أنيقة -->
        <div class="top-balance" id="topBalance">
            <div class="balance-row">
                <span class="balance-label">Points</span>
                <span class="led" id="points">0</span>
            </div>
            <div class="balance-row">
                <span class="balance-label">USDT</span>
                <span class="led" id="usdt">0.00</span>
            </div>
        </div>

        <!-- الشاشة الرئيسية -->
        <div class="screen active" id="home">
            
            <div id="clickerCircle" onmousedown="handleCircleClick(event)" ontouchstart="handleCircleClick(event)"></div>
            
            <div class="btn-row">
                <div class="btn" onclick="showPage('withdraw')">Withdraw</div>
                <div class="btn" onclick="showPage('task')">Task</div>
                <!-- زر الإعلانات (بدون عدد ظاهر) -->
                <div class="btn" id="adsBtn" onclick="handleAdWatch()">Ads</div>
                <div class="btn" onclick="showPage('swap')">Swap</div>
                <div class="btn" onclick="showPage('ledbord')">Ledbord</div>
                <div class="btn" onclick="showPage('refal')">Refal</div>
            </div>
        </div>

        <!-- صفحات فرعية -->
        <div class="page" id="withdraw">
            <button class="back" onclick="showPage('home')">Back</button>
            <div class="form-container">
                <h2 style="margin-bottom:30px;">Withdraw USDT</h2>
                
                <label style="font-size:14px;margin-bottom:8px;">Binance ID</label>
                <input type="text" id="binanceIdInput" class="form-input" placeholder="Enter your Binance ID">

                <label style="font-size:14px;margin-bottom:8px;">Amount (USDT)</label>
                <input type="number" id="withdrawAmountInput" class="form-input" placeholder="0.00" min="0.03" step="0.01">
                
                <div style="font-size:12px;color:#bbb;margin-bottom:20px;">
                    Minimum withdrawal: 0.03 USDT
                </div>
                
                <button onclick="handleWithdraw()" class="form-button">Withdraw</button>
                <div id="withdrawMsg" class="form-message"></div>
            </div>
        </div>
        <div class="page" id="task">
             <button class="back" onclick="showPage('home')">Back</button>
             <div class="task-list">
                 <h2 style="color:#fff; text-align:center; margin-bottom:10px; font-size: 20px;">Tasks</h2>
                 <div class="task-item">
                     <div class="task-info">
                         <span class="task-title">Watch 100 Ads</span>
                         <span class="task-reward">+0.02 USDT</span>
                     </div>
                     <button class="task-button" onclick="showPage('home');">Watch</button>
                 </div>
                 <div class="task-item">
                     <div class="task-info">
                         <span class="task-title">Join Telegram Channel</span>
                         <span class="task-reward">+10,000 Points</span>
                     </div>
                     <button id="joinChannelBtn" class="task-button" onclick="joinChannel()">Join</button>
                 </div>
             </div>
        </div>
        <div class="page" id="ledbord">
            <button class="back" onclick="showPage('home')">Back</button>
            <div class="leaderboard-list" id="leaderboardList">
                <h2 style="color:#fff; text-align:center; margin-bottom:10px; font-size: 20px;">Leaderboard</h2>
                <!-- Dynamic content will be injected here -->
            </div>
        </div>

        <!-- صفحة السواب -->
        <div class="page" id="swap">
            <button class="back" onclick="showPage('home')">Back</button>
            <div class="form-container">
                <h2 style="margin-bottom:30px;">Swap Points to USDT</h2>
                <label style="font-size:14px;margin-bottom:8px;">Enter Points</label>
                <input type="number" id="pointsInput" class="form-input" placeholder="0" min="0" step="1">
                <div style="font-size:14px;color:#bbb;margin-bottom:15px;">
                    You will receive: <span id="usdtValue" class="led" style="color:#4CAF50;font-weight:600;">0.00 USDT</span>
                </div>
                <button onclick="handleConvert()" class="form-button">Convert</button>
                <div id="swapMsg" class="form-message"></div>
            </div>
        </div>

        <!-- صفحة الريفيرال -->
        <div class="page" id="refal">
            <button class="back" onclick="showPage('home')">Back</button>
            <div class="form-container">
                <h2 style="color:#fff;margin-bottom:30px;">Referral Program</h2>
                <p style="font-size: 14px; color: #ccc; text-align: center; margin-bottom: 25px; max-width: 280px;">
                    Invite your friends and earn points for each referral!
                </p>
                <button id="copyBtn" class="form-button" onclick="copyRefLink()">Copy Referral Link</button>
                <div id="copyMsg" style="color:#4CAF50;margin-top:15px;opacity:0;transition:opacity .3s">✓ Copied!</div>
                <div style="margin-top:30px;color:#fff;font-size:18px">Your Referrals: <span id="refCount" class="led">0</span></div>
            </div>
        </div>
    </div>

    <!-- GigaPub SDK -->
    <script src="https://ad.gigapub.tech/script?id=3459"></script>
    <audio id="clickSound" src="https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-the-sound-pack-tree/tspt_computer_mouse_click_single_001.mp3" preload="auto"></audio>

    <script>
        // This script will be replaced by the parent component
    </script>
</body>
</html>